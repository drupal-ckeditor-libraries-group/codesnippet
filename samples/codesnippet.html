<!DOCTYPE html>
<!--
Copyright (c) 2003-2014, CKSource - Frederico Knabben. All rights reserved.
For licensing, see LICENSE.md or http://ckeditor.com/license
-->
<html>
<head>
	<meta charset="utf-8">
	<title>CodeSnippet &mdash; CKEditor Sample</title>
	<script src="../../../ckeditor.js"></script>
	<link href="../../../samples/sample.css" rel="stylesheet">
</head>
<body>
	<h1 class="samples">
		<a href="../../../samples/index.html">CKEditor Samples</a> &raquo; CodeSnippet
	</h1>

	<h2>Default snippet highlighting with highlight.js</h2>
	<p>By default <code>codesnippet</code> plugin uses client-side highlight.js library. You can adjust it's appearance using <code>codesnippet_template</code> config variable.</p>
	<p>
		Select template:
		<select id="templateSelect"></select>
	</p>

	<pre class="samples" id="sampleConfig">CKEDITOR.replace( 'editor1', {
	extraPlugins: 'codesnippet'
} );</pre>

	<p id="ie8-warning">
		Please note that syntax highlighting feature is not compatible with Internet Explorer 8.
	</p>

	<textarea id="editor1">
&lt;p&gt;A bit of JS:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-php&quot;&gt;&amp;lt;?php
isset( $foo );
# Comment
// Comment2
function foo( $bar ) {
  if ( $bar &amp;gt; 3 ) {
   echo &quot;aaa&quot;;
  }
}&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;quick sql&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;SELECT cust.id, cust.name, loc.city FROM cust LEFT JOIN loc ON ( cust.loc_id = loc.id ) GROUP BY cust.type WHERE cust.type IN ( 1, 2, 3, 4, 5 );&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A bit of uknown markup:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;moo(); &lt;strong&gt;// Why not cow?&lt;/strong&gt;
&lt;/code&gt;&lt;/pre&gt;
	</textarea>

	<h2>Server-side highlighter</h2>
	<p>You can extend highlighting functinallity by creating your own plugin which will take care of syntax highlighting. In this case we will use <code>codesnippetgeshi</code> plugin in order to use GeSHi as highlight provider.</p>
	<p>In this case we will also use <code>codesnippet_langs</code> config variable, to reduce available languages list.</p>

	<pre class="samples">CKEDITOR.replace( 'editor2', {
	extraPlugins: 'codesnippet,codesnippetgeshi',
	codesnippet_langs: {
		html4strict: 'HTML',
		html5: 'HTML5',
		javascript: 'JavaScript',
		php: 'PHP',
		sql: 'SQL'
	}
} );</pre>

	<textarea id="editor2">
&lt;p&gt;A bit of JS:&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;language-php&quot;&gt;&amp;lt;?php
isset( $foo );
# Comment
// Comment2
function foo( $bar ) {
  if ( $bar &amp;gt; 3 ) {
   echo &quot;aaa&quot;;
  }
}&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;quick sql&lt;/p&gt;
&lt;pre&gt;
&lt;code class=&quot;language-sql&quot;&gt;SELECT cust.id, cust.name, loc.city FROM cust LEFT JOIN loc ON ( cust.loc_id = loc.id ) GROUP BY cust.type WHERE cust.type IN ( 1, 2, 3, 4, 5 );&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;A bit of uknown markup:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;moo(); &lt;strong&gt;// Why not cow?&lt;/strong&gt;
&lt;/code&gt;&lt;/pre&gt;
	</textarea>

	<script>
		( function() {
			// Default editor initialization, this one will have no template assigned,
			// so it will get default template.
			CKEDITOR.replace( 'editor1', {
				extraPlugins: 'codesnippet'
			} );

			// Second editor, using snippetgeshi plugin.
			CKEDITOR.replace( 'editor2', {
				extraPlugins: 'codesnippet,codesnippetgeshi',
				codesnippet_langs: {
					html4strict: 'HTML',
					html5: 'HTML5',
					javascript: 'JavaScript',
					php: 'PHP',
					sql: 'SQL'
				}
			} );

			// Remaining part is resposible only for interactive sample logic.
			var templates = [ 'default', 'arta', 'ascetic', 'atelier-dune.dark', 'atelier-dune.light', 'atelier-forest.dark', 'atelier-forest.light', 'atelier-heath.dark', 'atelier-heath.light', 'atelier-lakeside.dark', 'atelier-lakeside.light', 'atelier-seaside.dark', 'atelier-seaside.light', 'brown_paper', 'dark', 'docco', 'far', 'foundation', 'github', 'googlecode', 'idea', 'ir_black', 'magula', 'mono-blue', 'monokai', 'monokai_sublime', 'obsidian', 'paraiso.dark', 'paraiso.light', 'pojoaque', 'railscasts', 'rainbow', 'school_book', 'solarized_dark', 'solarized_light', 'sunburst', 'tomorrow-night-blue', 'tomorrow-night-bright', 'tomorrow-night-eighties', 'tomorrow-night', 'tomorrow', 'vs', 'xcode', 'zenburn' ];

			var templateSelect = document.getElementById( 'templateSelect' ),
				codeTemplate = 'CKEDITOR.replace( \'editor1\', {\n	extraPlugins: \'codesnippet\',\n	codesnippet_template: \'{tpl}\'\n} );',
				// This function will encapsulate all the logic needed to replace first
				// editor with template picked in select.
				createTemplatedEditor = function( snippetTemplateName ) {
					if ( CKEDITOR.instances.editor1 )
						CKEDITOR.instances.editor1.destroy();

					CKEDITOR.replace( 'editor1', {
						extraPlugins: 'codesnippet',
						codesnippet_template: snippetTemplateName
					} );

					// Update sample code. Purely DOM-oriented text insertion, otherwise IE8 was consuming tab chars.
					var sampleConfigPre = CKEDITOR.document.getById( 'sampleConfig' );
					sampleConfigPre.setHtml( '' );
					sampleConfigPre.append( new CKEDITOR.dom.text( codeTemplate.replace( '{tpl}', snippetTemplateName ) ) );
				};

			// Filling up options in template select.
			for ( var i=0; i < templates.length; i++ ) {
				var curTemplate = templates[ i ],
					optElem;

				// We need to use bare node, coz IE9 have issue with innerHTML inside
				// select.
				optElem = document.createElement( 'option' );
				optElem.innerHTML = curTemplate;
				optElem.value = curTemplate;
				templateSelect.appendChild( optElem );
			}

			templateSelect.onchange = function() {
				createTemplatedEditor( this.value );
			};

			if ( CKEDITOR.env.ie && CKEDITOR.env.version == 8 )
				document.getElementById( 'ie8-warning' ).className = 'warning';
		}() );
	</script>

	<div id="footer">
		<hr>
		<p>
			CKEditor - The text editor for the Internet - <a class="samples" href="http://ckeditor.com/">http://ckeditor.com</a>
		</p>
		<p id="copy">
			Copyright &copy; 2003-2014, <a class="samples" href="http://cksource.com/">CKSource</a> - Frederico
			Knabben. All rights reserved.
		</p>
	</div>
</body>
</html>
